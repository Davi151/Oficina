create table Funcionario (
	F_ID SERIAL NOT NULL,
	F_CPF VARCHAR(15),
	F_NOME VARCHAR(100),
	CONSTRAINT Funcionario_pkey PRIMARY KEY (F_ID)
);

create table Usuario (
	U_ID SERIAL NOT NULL,
	F_ID INTEGER NOT NULL,
	U_LOGIN VARCHAR(100),
	U_SENHA VARCHAR(100),
	CONSTRAINT Usuario_pkey PRIMARY KEY (U_ID),
	CONSTRAINT Usuario_fkey FOREIGN KEY (F_ID) REFERENCES Funcionario(F_ID)
);

create table Peca(
	P_ID SERIAL NOT NULL,
	P_NOME VARCHAR(100),
	P_PRECO DECIMAL,
	P_UNIDADE INTEGER,
	CONSTRAINT Peca_pkey PRIMARY KEY (P_ID)
);

create table Controla (
	U_ID SERIAL NOT NULL,
	P_ID INTEGER NOT NULL,
	CONSTRAINT Controla_pkey PRIMARY KEY (U_ID, P_ID),
	CONSTRAINT Controla_fkey FOREIGN KEY (U_ID) REFERENCES Usuario(U_ID),
	CONSTRAINT Controla_fkey2 FOREIGN KEY (P_ID) REFERENCES Peca(P_ID)
);

CREATE TABLE Auditoria(
	A_ID INTEGER NOT NULL,
	P_ID INTEGER NOT NULL,
	A_DATA DATE,
	A_HORA DATE,
	CONSTRAINT Auditoria_pkey PRIMARY KEY (A_ID),
	CONSTRAINT Auditoria_fkey FOREIGN KEY (P_ID) REFERENCES Peca(P_ID)
);

